<!DOCTYPE html><html> <head><title>Extension Messaging frame</title><script type="module">const o=typeof chrome<"u"?chrome:typeof browser<"u"?browser:null;parent===window?document.body.innerHTML="<p>This page is intended to be embedded for internal communication.</p>":parent.postMessage({type:"ext",method:"init"},"*");const a=(()=>{const e=new URLSearchParams(location.search);return{extID:e.get("extID"),origin:e.get("origin")}})();let i=null;const g=()=>{i&&(console.warn("disconnect port"),i.disconnect(),i=null)},u={isInstalled:async e=>{const n=!!o&&!!o.runtime;if(!n&&e?.throw)throw{type:"not-installed",message:"extension not installed"};return n},enable:async e=>{const n=await c("getRule");if(console.log("rule",n),n&&!n.disabled&&(!e||typeof e.credentials>"u"||n.credentials===e.credentials))return!0;if(!n||n.disabled||!n.credentials&&e?.credentials){let t="";if(!n||n.disabled?(t=`Current page("${origin}") is requesting to enable CORS`,e?(e.credentials?t+=" with credentials.":t+=".",e.reason&&(t+=`
Message from current Page:

${e.reason}

`)):t+=`

`,t+=`Please only enable CORS if you trust the current page.
Do you want to enable CORS?`):(t="Current page is requesting to enable CORS with credentials.",e?.reason?t+=`
Message from current Page:

${e.reason}

`:t+=`

`,t+="Please only enable CORS with credentials if you trust the current page. Do you want to continue?"),!confirm(t))throw{type:"user-cancel",message:"User canceled"}}return c("enable",e)},toggleChangeListener:async e=>{g(),e?.enabled&&(i=o.runtime.connect(a.extID),i.onDisconnect.addListener(g),i.onMessage.addListener(n=>{d({id:Math.random().toString(36).slice(2),type:"onChange",data:n})}))}};window.addEventListener("message",async e=>{const n=e.data;if(console.log("frame message",n),!f(n)||n.type!=="ext")return;const{method:t,payload:s}=n;try{const r=u[t];if(t!=="isInstalled"&&await u.isInstalled({throw:!0}),!a.extID||!a.origin)throw{type:"config-error",message:"extID or origin not provided"};try{new URL(a.origin)}catch{throw{type:"invalid-origin",message:"invalid origin"}}let l;r?l=await r(s):l=await c(n.method,n.payload),d({id:n.id,type:"response",data:l})}catch(r){d({id:n.id,type:"response",error:r&&typeof r=="object"?r:{message:r,type:"inner-error"}})}});function c(e,n){return new Promise((t,s)=>{o.runtime.sendMessage(a.extID,{method:e,payload:{...n,origin:a.origin}},r=>{if(console.log("ext response",r),r&&typeof r=="object"&&r.__mozWebExtensionPolyfillReject__)try{return s(JSON.parse(r.message))}catch{return s(r.message)}t(r)})})}function f(e){return e&&e.type&&e.id&&e.method}function d(e){parent.postMessage(e,"*")}</script><link rel="stylesheet" href="/_astro/docs.Bii6MMSE.css"></head> </html>